import { __decorate, __metadata } from "tslib";
import { EventEmitter, Input, Output, Directive } from '@angular/core';
import { browserLanguage, poLocaleDefault, convertToBoolean } from '../../utils/util';
export const poListViewLiteralsDefault = {
    en: {
        hideDetails: 'Hide details',
        loadMoreData: 'Load more data',
        noData: 'No data found',
        selectAll: 'Select all',
        showDetails: 'Show details'
    },
    es: {
        hideDetails: 'Ocultar detalles',
        loadMoreData: 'Cargar más resultados',
        noData: 'Datos no encontrados',
        selectAll: 'Seleccionar todos',
        showDetails: 'Mostrar detalles'
    },
    pt: {
        hideDetails: 'Ocultar detalhes',
        loadMoreData: 'Carregar mais resultados',
        noData: 'Nenhum dado encontrado',
        selectAll: 'Selecionar todos',
        showDetails: 'Exibir detalhes'
    },
    ru: {
        hideDetails: 'Скрыть детали',
        loadMoreData: 'Загрузить больше результатов',
        noData: 'Данные не найдены',
        selectAll: 'Выбрать все',
        showDetails: 'Посмотреть детали'
    }
};
/**
 * @description
 *
 * Componente de lista que recebe um array de objetos e renderiza de forma dinâmica os dados de
 * acordo com a necessidade de cada tela e deve ser utilizado em conjunto com as diretivas de *templates*
 *  **[p-list-view-content-template](/documentation/po-list-view-content-template)** e
 * **[p-list-view-detail-template](/documentation/po-list-view-detail-template)**.
 *
 * O componente disponibiliza uma área específica para exibição informações adicionais,
 * através da diretiva **[p-list-view-detail-template](/documentation/po-list-view-detail-template)**.
 */
let PoListViewBaseComponent = class PoListViewBaseComponent {
    constructor() {
        this.selectAll = false;
        this.showHeader = false;
        /**
         * Recebe uma ação, que será executada quando clicar no botão "Carregar mais resultados".
         *
         * > Caso nenhuma ação for definida o mesmo não ficará visível.
         */
        this.showMore = new EventEmitter();
        /**
         * Ação que será executada ao clicar no título.
         *
         * Ao ser disparado, o método inserido na ação irá receber como parâmetro o item da lista clicado.
         */
        this.titleAction = new EventEmitter();
    }
    /**
     * @optional
     *
     * @description
     *
     * Lista de ações que serão exibidas no componente.
     */
    set actions(value) {
        this._actions = Array.isArray(value) ? value : [];
    }
    get actions() {
        return this._actions;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define a altura do `po-list-view` em *pixels*.
     */
    set height(height) {
        this._height = height;
    }
    get height() {
        return this._height;
    }
    /**
     * @description
     *
     * Esconde o *checkbox* para seleção de todos os itens.
     *
     * @default `false`
     */
    set hideSelectAll(hideSelectAll) {
        this._hideSelectAll = convertToBoolean(hideSelectAll);
        this.showMainHeader();
    }
    get hideSelectAll() {
        return this._hideSelectAll;
    }
    /** Lista de itens que serão exibidos no componente. */
    set items(value) {
        this._items = Array.isArray(value) ? value : [];
    }
    get items() {
        return this._items;
    }
    /**
     * @optional
     *
     * @description
     *
     * Objeto com as literais usadas no `po-list-view`.
     *
     * Existem duas maneiras de customizar o componente, passando um objeto com todas as literais disponíveis:
     *
     * ```
     *  const customLiterals: PoListViewLiterals = {
     *    hideDetail: 'Ocultar detalhes completamente',
     *    loadMoreData: 'Mais dados',
     *    showDetail: 'Mostrar mais detalhes',
     *    selectAll: 'Selecionar todos os itens'
     *  };
     * ```
     *
     * Ou passando apenas as literais que deseja customizar:
     *
     * ```
     *  const customLiterals: PoListViewLiterals = {
     *    showDetail: 'Mostrar mais detalhes'
     *  };
     * ```
     *
     * E para carregar as literais customizadas, basta apenas passar o objeto para o componente.
     *
     * ```
     * <po-list-view
     *   [p-literals]="customLiterals">
     * </po-list-view>
     * ```
     *
     * > O objeto padrão de literais será traduzido de acordo com o idioma do browser (pt, en, es).
     */
    set literals(value) {
        if (value instanceof Object && !(value instanceof Array)) {
            this._literals = Object.assign(Object.assign(Object.assign({}, poListViewLiteralsDefault[poLocaleDefault]), poListViewLiteralsDefault[browserLanguage()]), value);
        }
        else {
            this._literals = poListViewLiteralsDefault[browserLanguage()];
        }
    }
    get literals() {
        return this._literals || poListViewLiteralsDefault[browserLanguage()];
    }
    /**
     * @optional
     *
     * @description
     *
     * Habilita um *checkbox* para cada item da lista. Todos os items possuem a propriedade dinâmica `$selected` para identificar se o
     * item está selecionado, por exemplo:
     *
     * ```
     *  item.$selected
     *
     *  // ou
     *
     *  item['$selected']
     * ```
     *
     * @default `false`
     */
    set select(select) {
        this._select = convertToBoolean(select);
        this.showMainHeader();
    }
    get select() {
        return this._select;
    }
    /**
     * @optional
     *
     * @description
     *
     * Indica que o botão `Carregar Mais Resultados` será desabilitado.
     */
    set showMoreDisabled(value) {
        this._showMoreDisabled = convertToBoolean(value);
    }
    get showMoreDisabled() {
        return this._showMoreDisabled;
    }
    onClickAction(listViewAction, item) {
        const cleanItem = this.deleteInternalAttrs(item);
        if (listViewAction.action) {
            listViewAction.action(cleanItem);
        }
    }
    onShowMore() {
        this.showMore.emit();
    }
    runTitleAction(listItem) {
        const itemWithPublicProperties = this.deleteInternalAttrs(listItem);
        this.titleAction.emit(itemWithPublicProperties);
    }
    selectAllListItems() {
        if (!this.hideSelectAll) {
            this.selectAll = !this.selectAll;
            this.items.forEach(item => {
                item.$selected = this.selectAll;
            });
        }
    }
    selectListItem(row) {
        row.$selected = !row.$selected;
        this.selectAll = this.checkIfItemsAreSelected(this.items);
    }
    deleteInternalAttrs(item) {
        const itemCopy = item ? Object.assign({}, item) : undefined;
        for (const key in itemCopy) {
            if (itemCopy.hasOwnProperty(key) && key.startsWith('$')) {
                delete itemCopy[key];
            }
        }
        return itemCopy;
    }
    checkIfItemsAreSelected(items) {
        const someCheckedOrIndeterminate = item => item.$selected || item.$selected === null;
        const everyChecked = item => item.$selected;
        if (items.every(everyChecked)) {
            return true;
        }
        if (items.some(someCheckedOrIndeterminate)) {
            return null;
        }
        return false;
    }
    showMainHeader() {
        this.showHeader = !!(this.select && !this.hideSelectAll && this.items && this.items.length);
    }
};
__decorate([
    Input('p-actions'),
    __metadata("design:type", Array),
    __metadata("design:paramtypes", [Array])
], PoListViewBaseComponent.prototype, "actions", null);
__decorate([
    Input('p-height'),
    __metadata("design:type", Number),
    __metadata("design:paramtypes", [Number])
], PoListViewBaseComponent.prototype, "height", null);
__decorate([
    Input('p-hide-select-all'),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], PoListViewBaseComponent.prototype, "hideSelectAll", null);
__decorate([
    Input('p-items'),
    __metadata("design:type", Array),
    __metadata("design:paramtypes", [Array])
], PoListViewBaseComponent.prototype, "items", null);
__decorate([
    Input('p-literals'),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], PoListViewBaseComponent.prototype, "literals", null);
__decorate([
    Input('p-property-link'),
    __metadata("design:type", String)
], PoListViewBaseComponent.prototype, "propertyLink", void 0);
__decorate([
    Input('p-property-title'),
    __metadata("design:type", String)
], PoListViewBaseComponent.prototype, "propertyTitle", void 0);
__decorate([
    Input('p-select'),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], PoListViewBaseComponent.prototype, "select", null);
__decorate([
    Input('p-show-more-disabled'),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], PoListViewBaseComponent.prototype, "showMoreDisabled", null);
__decorate([
    Output('p-show-more'),
    __metadata("design:type", EventEmitter)
], PoListViewBaseComponent.prototype, "showMore", void 0);
__decorate([
    Output('p-title-action'),
    __metadata("design:type", EventEmitter)
], PoListViewBaseComponent.prototype, "titleAction", void 0);
PoListViewBaseComponent = __decorate([
    Directive()
], PoListViewBaseComponent);
export { PoListViewBaseComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tbGlzdC12aWV3LWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBvLXVpL25nLWNvbXBvbmVudHMvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9wby1saXN0LXZpZXcvcG8tbGlzdC12aWV3LWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXZFLE9BQU8sRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFLdEYsTUFBTSxDQUFDLE1BQU0seUJBQXlCLEdBQUc7SUFDdkMsRUFBRSxFQUFzQjtRQUN0QixXQUFXLEVBQUUsY0FBYztRQUMzQixZQUFZLEVBQUUsZ0JBQWdCO1FBQzlCLE1BQU0sRUFBRSxlQUFlO1FBQ3ZCLFNBQVMsRUFBRSxZQUFZO1FBQ3ZCLFdBQVcsRUFBRSxjQUFjO0tBQzVCO0lBQ0QsRUFBRSxFQUFzQjtRQUN0QixXQUFXLEVBQUUsa0JBQWtCO1FBQy9CLFlBQVksRUFBRSx1QkFBdUI7UUFDckMsTUFBTSxFQUFFLHNCQUFzQjtRQUM5QixTQUFTLEVBQUUsbUJBQW1CO1FBQzlCLFdBQVcsRUFBRSxrQkFBa0I7S0FDaEM7SUFDRCxFQUFFLEVBQXNCO1FBQ3RCLFdBQVcsRUFBRSxrQkFBa0I7UUFDL0IsWUFBWSxFQUFFLDBCQUEwQjtRQUN4QyxNQUFNLEVBQUUsd0JBQXdCO1FBQ2hDLFNBQVMsRUFBRSxrQkFBa0I7UUFDN0IsV0FBVyxFQUFFLGlCQUFpQjtLQUMvQjtJQUNELEVBQUUsRUFBc0I7UUFDdEIsV0FBVyxFQUFFLGVBQWU7UUFDNUIsWUFBWSxFQUFFLDhCQUE4QjtRQUM1QyxNQUFNLEVBQUUsbUJBQW1CO1FBQzNCLFNBQVMsRUFBRSxhQUFhO1FBQ3hCLFdBQVcsRUFBRSxtQkFBbUI7S0FDakM7Q0FD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Qzs7O3VEQVVuQjtBQU95QjtJQUF6QixLQUFLLENBQUMsaUJBQWlCLENBQUM7OzZEQUF1QjtBQUdyQjtJQUExQixLQUFLLENBQUMsa0JBQWtCLENBQUM7OzhEQUF3QjtBQW9CL0I7SUFBbEIsS0FBSyxDQUFDLFVBQVUsQ0FBQzs7O3FEQUdqQjtBQWE4QjtJQUE5QixLQUFLLENBQUMsc0JBQXNCLENBQUM7OzsrREFFN0I7QUFXc0I7SUFBdEIsTUFBTSxDQUFDLGFBQWEsQ0FBQzs4QkFBWSxZQUFZO3lEQUFnQztBQU9wRDtJQUF6QixNQUFNLENBQUMsZ0JBQWdCLENBQUM7OEJBQWUsWUFBWTs0REFBZ0M7QUFwTHpFLHVCQUF1QjtJQURuQyxTQUFTLEVBQUU7R0FDQyx1QkFBdUIsQ0FvUG5DO1NBcFBZLHVCQUF1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCwgRGlyZWN0aXZlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IGJyb3dzZXJMYW5ndWFnZSwgcG9Mb2NhbGVEZWZhdWx0LCBjb252ZXJ0VG9Cb29sZWFuIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmltcG9ydCB7IFBvTGlzdFZpZXdBY3Rpb24gfSBmcm9tICcuL2ludGVyZmFjZXMvcG8tbGlzdC12aWV3LWFjdGlvbi5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUG9MaXN0Vmlld0xpdGVyYWxzIH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLWxpc3Qtdmlldy1saXRlcmFscy5pbnRlcmZhY2UnO1xuXG5leHBvcnQgY29uc3QgcG9MaXN0Vmlld0xpdGVyYWxzRGVmYXVsdCA9IHtcbiAgZW46IDxQb0xpc3RWaWV3TGl0ZXJhbHM+e1xuICAgIGhpZGVEZXRhaWxzOiAnSGlkZSBkZXRhaWxzJyxcbiAgICBsb2FkTW9yZURhdGE6ICdMb2FkIG1vcmUgZGF0YScsXG4gICAgbm9EYXRhOiAnTm8gZGF0YSBmb3VuZCcsXG4gICAgc2VsZWN0QWxsOiAnU2VsZWN0IGFsbCcsXG4gICAgc2hvd0RldGFpbHM6ICdTaG93IGRldGFpbHMnXG4gIH0sXG4gIGVzOiA8UG9MaXN0Vmlld0xpdGVyYWxzPntcbiAgICBoaWRlRGV0YWlsczogJ09jdWx0YXIgZGV0YWxsZXMnLFxuICAgIGxvYWRNb3JlRGF0YTogJ0NhcmdhciBtw6FzIHJlc3VsdGFkb3MnLFxuICAgIG5vRGF0YTogJ0RhdG9zIG5vIGVuY29udHJhZG9zJyxcbiAgICBzZWxlY3RBbGw6ICdTZWxlY2Npb25hciB0b2RvcycsXG4gICAgc2hvd0RldGFpbHM6ICdNb3N0cmFyIGRldGFsbGVzJ1xuICB9LFxuICBwdDogPFBvTGlzdFZpZXdMaXRlcmFscz57XG4gICAgaGlkZURldGFpbHM6ICdPY3VsdGFyIGRldGFsaGVzJyxcbiAgICBsb2FkTW9yZURhdGE6ICdDYXJyZWdhciBtYWlzIHJlc3VsdGFkb3MnLFxuICAgIG5vRGF0YTogJ05lbmh1bSBkYWRvIGVuY29udHJhZG8nLFxuICAgIHNlbGVjdEFsbDogJ1NlbGVjaW9uYXIgdG9kb3MnLFxuICAgIHNob3dEZXRhaWxzOiAnRXhpYmlyIGRldGFsaGVzJ1xuICB9LFxuICBydTogPFBvTGlzdFZpZXdMaXRlcmFscz57XG4gICAgaGlkZURldGFpbHM6ICfQodC60YDRi9GC0Ywg0LTQtdGC0LDQu9C4JyxcbiAgICBsb2FkTW9yZURhdGE6ICfQl9Cw0LPRgNGD0LfQuNGC0Ywg0LHQvtC70YzRiNC1INGA0LXQt9GD0LvRjNGC0LDRgtC+0LInLFxuICAgIG5vRGF0YTogJ9CU0LDQvdC90YvQtSDQvdC1INC90LDQudC00LXQvdGLJyxcbiAgICBzZWxlY3RBbGw6ICfQktGL0LHRgNCw0YLRjCDQstGB0LUnLFxuICAgIHNob3dEZXRhaWxzOiAn0J/QvtGB0LzQvtGC0YDQtdGC0Ywg0LTQtdGC0LDQu9C4J1xuICB9XG59O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIENvbXBvbmVudGUgZGUgbGlzdGEgcXVlIHJlY2ViZSB1bSBhcnJheSBkZSBvYmpldG9zIGUgcmVuZGVyaXphIGRlIGZvcm1hIGRpbsOibWljYSBvcyBkYWRvcyBkZVxuICogYWNvcmRvIGNvbSBhIG5lY2Vzc2lkYWRlIGRlIGNhZGEgdGVsYSBlIGRldmUgc2VyIHV0aWxpemFkbyBlbSBjb25qdW50byBjb20gYXMgZGlyZXRpdmFzIGRlICp0ZW1wbGF0ZXMqXG4gKiAgKipbcC1saXN0LXZpZXctY29udGVudC10ZW1wbGF0ZV0oL2RvY3VtZW50YXRpb24vcG8tbGlzdC12aWV3LWNvbnRlbnQtdGVtcGxhdGUpKiogZVxuICogKipbcC1saXN0LXZpZXctZGV0YWlsLXRlbXBsYXRlXSgvZG9jdW1lbnRhdGlvbi9wby1saXN0LXZpZXctZGV0YWlsLXRlbXBsYXRlKSoqLlxuICpcbiAqIE8gY29tcG9uZW50ZSBkaXNwb25pYmlsaXphIHVtYSDDoXJlYSBlc3BlY8OtZmljYSBwYXJhIGV4aWJpw6fDo28gaW5mb3JtYcOnw7VlcyBhZGljaW9uYWlzLFxuICogYXRyYXbDqXMgZGEgZGlyZXRpdmEgKipbcC1saXN0LXZpZXctZGV0YWlsLXRlbXBsYXRlXSgvZG9jdW1lbnRhdGlvbi9wby1saXN0LXZpZXctZGV0YWlsLXRlbXBsYXRlKSoqLlxuICovXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBjbGFzcyBQb0xpc3RWaWV3QmFzZUNvbXBvbmVudCB7XG4gIHByaXZhdGUgX2FjdGlvbnM6IEFycmF5PFBvTGlzdFZpZXdBY3Rpb24+O1xuICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBfaGlkZVNlbGVjdEFsbDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfaXRlbXM6IEFycmF5PGFueT47XG4gIHByaXZhdGUgX2xpdGVyYWxzOiBQb0xpc3RWaWV3TGl0ZXJhbHM7XG4gIHByaXZhdGUgX3NlbGVjdDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfc2hvd01vcmVEaXNhYmxlZDogYm9vbGVhbjtcblxuICBwb3B1cFRhcmdldDogYW55O1xuICBzZWxlY3RBbGw6IGJvb2xlYW4gPSBmYWxzZTtcbiAgc2hvd0hlYWRlcjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIExpc3RhIGRlIGHDp8O1ZXMgcXVlIHNlcsOjbyBleGliaWRhcyBubyBjb21wb25lbnRlLlxuICAgKi9cbiAgQElucHV0KCdwLWFjdGlvbnMnKSBzZXQgYWN0aW9ucyh2YWx1ZTogQXJyYXk8UG9MaXN0Vmlld0FjdGlvbj4pIHtcbiAgICB0aGlzLl9hY3Rpb25zID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdO1xuICB9XG5cbiAgZ2V0IGFjdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgYSBhbHR1cmEgZG8gYHBvLWxpc3Qtdmlld2AgZW0gKnBpeGVscyouXG4gICAqL1xuICBASW5wdXQoJ3AtaGVpZ2h0Jykgc2V0IGhlaWdodChoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgfVxuXG4gIGdldCBoZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRXNjb25kZSBvICpjaGVja2JveCogcGFyYSBzZWxlw6fDo28gZGUgdG9kb3Mgb3MgaXRlbnMuXG4gICAqXG4gICAqIEBkZWZhdWx0IGBmYWxzZWBcbiAgICovXG4gIEBJbnB1dCgncC1oaWRlLXNlbGVjdC1hbGwnKSBzZXQgaGlkZVNlbGVjdEFsbChoaWRlU2VsZWN0QWxsOiBib29sZWFuKSB7XG4gICAgdGhpcy5faGlkZVNlbGVjdEFsbCA9IGNvbnZlcnRUb0Jvb2xlYW4oaGlkZVNlbGVjdEFsbCk7XG4gICAgdGhpcy5zaG93TWFpbkhlYWRlcigpO1xuICB9XG5cbiAgZ2V0IGhpZGVTZWxlY3RBbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hpZGVTZWxlY3RBbGw7XG4gIH1cblxuICAvKiogTGlzdGEgZGUgaXRlbnMgcXVlIHNlcsOjbyBleGliaWRvcyBubyBjb21wb25lbnRlLiAqL1xuICBASW5wdXQoJ3AtaXRlbXMnKSBzZXQgaXRlbXModmFsdWU6IEFycmF5PGFueT4pIHtcbiAgICB0aGlzLl9pdGVtcyA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbXTtcbiAgfVxuXG4gIGdldCBpdGVtcygpIHtcbiAgICByZXR1cm4gdGhpcy5faXRlbXM7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBPYmpldG8gY29tIGFzIGxpdGVyYWlzIHVzYWRhcyBubyBgcG8tbGlzdC12aWV3YC5cbiAgICpcbiAgICogRXhpc3RlbSBkdWFzIG1hbmVpcmFzIGRlIGN1c3RvbWl6YXIgbyBjb21wb25lbnRlLCBwYXNzYW5kbyB1bSBvYmpldG8gY29tIHRvZGFzIGFzIGxpdGVyYWlzIGRpc3BvbsOtdmVpczpcbiAgICpcbiAgICogYGBgXG4gICAqICBjb25zdCBjdXN0b21MaXRlcmFsczogUG9MaXN0Vmlld0xpdGVyYWxzID0ge1xuICAgKiAgICBoaWRlRGV0YWlsOiAnT2N1bHRhciBkZXRhbGhlcyBjb21wbGV0YW1lbnRlJyxcbiAgICogICAgbG9hZE1vcmVEYXRhOiAnTWFpcyBkYWRvcycsXG4gICAqICAgIHNob3dEZXRhaWw6ICdNb3N0cmFyIG1haXMgZGV0YWxoZXMnLFxuICAgKiAgICBzZWxlY3RBbGw6ICdTZWxlY2lvbmFyIHRvZG9zIG9zIGl0ZW5zJ1xuICAgKiAgfTtcbiAgICogYGBgXG4gICAqXG4gICAqIE91IHBhc3NhbmRvIGFwZW5hcyBhcyBsaXRlcmFpcyBxdWUgZGVzZWphIGN1c3RvbWl6YXI6XG4gICAqXG4gICAqIGBgYFxuICAgKiAgY29uc3QgY3VzdG9tTGl0ZXJhbHM6IFBvTGlzdFZpZXdMaXRlcmFscyA9IHtcbiAgICogICAgc2hvd0RldGFpbDogJ01vc3RyYXIgbWFpcyBkZXRhbGhlcydcbiAgICogIH07XG4gICAqIGBgYFxuICAgKlxuICAgKiBFIHBhcmEgY2FycmVnYXIgYXMgbGl0ZXJhaXMgY3VzdG9taXphZGFzLCBiYXN0YSBhcGVuYXMgcGFzc2FyIG8gb2JqZXRvIHBhcmEgbyBjb21wb25lbnRlLlxuICAgKlxuICAgKiBgYGBcbiAgICogPHBvLWxpc3Qtdmlld1xuICAgKiAgIFtwLWxpdGVyYWxzXT1cImN1c3RvbUxpdGVyYWxzXCI+XG4gICAqIDwvcG8tbGlzdC12aWV3PlxuICAgKiBgYGBcbiAgICpcbiAgICogPiBPIG9iamV0byBwYWRyw6NvIGRlIGxpdGVyYWlzIHNlcsOhIHRyYWR1emlkbyBkZSBhY29yZG8gY29tIG8gaWRpb21hIGRvIGJyb3dzZXIgKHB0LCBlbiwgZXMpLlxuICAgKi9cbiAgQElucHV0KCdwLWxpdGVyYWxzJykgc2V0IGxpdGVyYWxzKHZhbHVlOiBQb0xpc3RWaWV3TGl0ZXJhbHMpIHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3QgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgdGhpcy5fbGl0ZXJhbHMgPSB7XG4gICAgICAgIC4uLnBvTGlzdFZpZXdMaXRlcmFsc0RlZmF1bHRbcG9Mb2NhbGVEZWZhdWx0XSxcbiAgICAgICAgLi4ucG9MaXN0Vmlld0xpdGVyYWxzRGVmYXVsdFticm93c2VyTGFuZ3VhZ2UoKV0sXG4gICAgICAgIC4uLnZhbHVlXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saXRlcmFscyA9IHBvTGlzdFZpZXdMaXRlcmFsc0RlZmF1bHRbYnJvd3Nlckxhbmd1YWdlKCldO1xuICAgIH1cbiAgfVxuXG4gIGdldCBsaXRlcmFscygpIHtcbiAgICByZXR1cm4gdGhpcy5fbGl0ZXJhbHMgfHwgcG9MaXN0Vmlld0xpdGVyYWxzRGVmYXVsdFticm93c2VyTGFuZ3VhZ2UoKV07XG4gIH1cblxuICAvKiogUmVjZWJlIHVtYSBwcm9wcmllZGFkZSBxdWUgc2Vyw6EgdXRpbGl6YWRhIHBhcmEgcmVjdXBlcmFyIG8gdmFsb3IgZG8gb2JqZXRvIHF1ZSBzZXLDoSB1c2FkbyBjb21vIGxpbmsgcGFyYSBvIHTDrXR1bG8uICovXG4gIEBJbnB1dCgncC1wcm9wZXJ0eS1saW5rJykgcHJvcGVydHlMaW5rPzogc3RyaW5nO1xuXG4gIC8qKiBSZWNlYmUgdW1hIHByb3ByaWVkYWRlIHF1ZSBzZXLDoSB1dGlsaXphZGEgcGFyYSByZWN1cGVyYXIgbyB2YWxvciBkbyBvYmpldG8gcXVlIHNlcsOhIGV4aWJpZG8gY29tbyBvIHTDrXR1bG8gZGUgY2FkYSBpdGVtLiAqL1xuICBASW5wdXQoJ3AtcHJvcGVydHktdGl0bGUnKSBwcm9wZXJ0eVRpdGxlPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEhhYmlsaXRhIHVtICpjaGVja2JveCogcGFyYSBjYWRhIGl0ZW0gZGEgbGlzdGEuIFRvZG9zIG9zIGl0ZW1zIHBvc3N1ZW0gYSBwcm9wcmllZGFkZSBkaW7Dom1pY2EgYCRzZWxlY3RlZGAgcGFyYSBpZGVudGlmaWNhciBzZSBvXG4gICAqIGl0ZW0gZXN0w6Egc2VsZWNpb25hZG8sIHBvciBleGVtcGxvOlxuICAgKlxuICAgKiBgYGBcbiAgICogIGl0ZW0uJHNlbGVjdGVkXG4gICAqXG4gICAqICAvLyBvdVxuICAgKlxuICAgKiAgaXRlbVsnJHNlbGVjdGVkJ11cbiAgICogYGBgXG4gICAqXG4gICAqIEBkZWZhdWx0IGBmYWxzZWBcbiAgICovXG4gIEBJbnB1dCgncC1zZWxlY3QnKSBzZXQgc2VsZWN0KHNlbGVjdDogYm9vbGVhbikge1xuICAgIHRoaXMuX3NlbGVjdCA9IGNvbnZlcnRUb0Jvb2xlYW4oc2VsZWN0KTtcbiAgICB0aGlzLnNob3dNYWluSGVhZGVyKCk7XG4gIH1cblxuICBnZXQgc2VsZWN0KCkge1xuICAgIHJldHVybiB0aGlzLl9zZWxlY3Q7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBJbmRpY2EgcXVlIG8gYm90w6NvIGBDYXJyZWdhciBNYWlzIFJlc3VsdGFkb3NgIHNlcsOhIGRlc2FiaWxpdGFkby5cbiAgICovXG4gIEBJbnB1dCgncC1zaG93LW1vcmUtZGlzYWJsZWQnKSBzZXQgc2hvd01vcmVEaXNhYmxlZCh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuX3Nob3dNb3JlRGlzYWJsZWQgPSBjb252ZXJ0VG9Cb29sZWFuKHZhbHVlKTtcbiAgfVxuXG4gIGdldCBzaG93TW9yZURpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zaG93TW9yZURpc2FibGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY2ViZSB1bWEgYcOnw6NvLCBxdWUgc2Vyw6EgZXhlY3V0YWRhIHF1YW5kbyBjbGljYXIgbm8gYm90w6NvIFwiQ2FycmVnYXIgbWFpcyByZXN1bHRhZG9zXCIuXG4gICAqXG4gICAqID4gQ2FzbyBuZW5odW1hIGHDp8OjbyBmb3IgZGVmaW5pZGEgbyBtZXNtbyBuw6NvIGZpY2Fyw6Egdmlzw612ZWwuXG4gICAqL1xuICBAT3V0cHV0KCdwLXNob3ctbW9yZScpIHNob3dNb3JlPzogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKipcbiAgICogQcOnw6NvIHF1ZSBzZXLDoSBleGVjdXRhZGEgYW8gY2xpY2FyIG5vIHTDrXR1bG8uXG4gICAqXG4gICAqIEFvIHNlciBkaXNwYXJhZG8sIG8gbcOpdG9kbyBpbnNlcmlkbyBuYSBhw6fDo28gaXLDoSByZWNlYmVyIGNvbW8gcGFyw6JtZXRybyBvIGl0ZW0gZGEgbGlzdGEgY2xpY2Fkby5cbiAgICovXG4gIEBPdXRwdXQoJ3AtdGl0bGUtYWN0aW9uJykgdGl0bGVBY3Rpb24/OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIG9uQ2xpY2tBY3Rpb24obGlzdFZpZXdBY3Rpb246IFBvTGlzdFZpZXdBY3Rpb24sIGl0ZW0pIHtcbiAgICBjb25zdCBjbGVhbkl0ZW0gPSB0aGlzLmRlbGV0ZUludGVybmFsQXR0cnMoaXRlbSk7XG4gICAgaWYgKGxpc3RWaWV3QWN0aW9uLmFjdGlvbikge1xuICAgICAgbGlzdFZpZXdBY3Rpb24uYWN0aW9uKGNsZWFuSXRlbSk7XG4gICAgfVxuICB9XG5cbiAgb25TaG93TW9yZSgpOiB2b2lkIHtcbiAgICB0aGlzLnNob3dNb3JlLmVtaXQoKTtcbiAgfVxuXG4gIHJ1blRpdGxlQWN0aW9uKGxpc3RJdGVtOiBhbnkpIHtcbiAgICBjb25zdCBpdGVtV2l0aFB1YmxpY1Byb3BlcnRpZXMgPSB0aGlzLmRlbGV0ZUludGVybmFsQXR0cnMobGlzdEl0ZW0pO1xuICAgIHRoaXMudGl0bGVBY3Rpb24uZW1pdChpdGVtV2l0aFB1YmxpY1Byb3BlcnRpZXMpO1xuICB9XG5cbiAgc2VsZWN0QWxsTGlzdEl0ZW1zKCkge1xuICAgIGlmICghdGhpcy5oaWRlU2VsZWN0QWxsKSB7XG4gICAgICB0aGlzLnNlbGVjdEFsbCA9ICF0aGlzLnNlbGVjdEFsbDtcblxuICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpdGVtLiRzZWxlY3RlZCA9IHRoaXMuc2VsZWN0QWxsO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc2VsZWN0TGlzdEl0ZW0ocm93OiBhbnkpIHtcbiAgICByb3cuJHNlbGVjdGVkID0gIXJvdy4kc2VsZWN0ZWQ7XG5cbiAgICB0aGlzLnNlbGVjdEFsbCA9IHRoaXMuY2hlY2tJZkl0ZW1zQXJlU2VsZWN0ZWQodGhpcy5pdGVtcyk7XG4gIH1cblxuICBwcml2YXRlIGRlbGV0ZUludGVybmFsQXR0cnMoaXRlbSkge1xuICAgIGNvbnN0IGl0ZW1Db3B5ID0gaXRlbSA/IHsgLi4uaXRlbSB9IDogdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gaXRlbUNvcHkpIHtcbiAgICAgIGlmIChpdGVtQ29weS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGtleS5zdGFydHNXaXRoKCckJykpIHtcbiAgICAgICAgZGVsZXRlIGl0ZW1Db3B5W2tleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZW1Db3B5O1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja0lmSXRlbXNBcmVTZWxlY3RlZChpdGVtczogQXJyYXk8YW55Pik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHNvbWVDaGVja2VkT3JJbmRldGVybWluYXRlID0gaXRlbSA9PiBpdGVtLiRzZWxlY3RlZCB8fCBpdGVtLiRzZWxlY3RlZCA9PT0gbnVsbDtcbiAgICBjb25zdCBldmVyeUNoZWNrZWQgPSBpdGVtID0+IGl0ZW0uJHNlbGVjdGVkO1xuXG4gICAgaWYgKGl0ZW1zLmV2ZXJ5KGV2ZXJ5Q2hlY2tlZCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChpdGVtcy5zb21lKHNvbWVDaGVja2VkT3JJbmRldGVybWluYXRlKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93TWFpbkhlYWRlcigpIHtcbiAgICB0aGlzLnNob3dIZWFkZXIgPSAhISh0aGlzLnNlbGVjdCAmJiAhdGhpcy5oaWRlU2VsZWN0QWxsICYmIHRoaXMuaXRlbXMgJiYgdGhpcy5pdGVtcy5sZW5ndGgpO1xuICB9XG59XG4iXX0=