import { __decorate, __metadata } from "tslib";
import { EventEmitter, Input, Output, Directive } from '@angular/core';
import { convertToInt, isTypeof } from '../../utils/util';
import { PoChartType } from './enums/po-chart-type.enum';
const poChartDefaultHeight = 400;
const poChartMinHeight = 200;
const poChartTypeDefault = PoChartType.Pie;
/**
 * @description
 *
 * O `po-chart` é um componente para renderização de dados através de gráficos, com isso facilitando a compreensão e tornando a
 * visualização destes dados mais agradável.
 *
 * Através de suas principais propriedades é possível definir o tipo de gráfico, uma altura e um título.
 *
 * Além disso, também é possível definir uma ação que será executada ao clicar em determinado elemento do gráfico
 * e outra que será executada ao passar o *mouse* sobre o elemento.
 *
 * #### Boas práticas
 *
 * - Para que o gráfico não fique ilegível e incompreensível, evite uma quantia excessiva de séries.
 * - Para exibir a intensidade de um único dado dê preferência ao tipo `gauge`.
 */
let PoChartBaseComponent = class PoChartBaseComponent {
    constructor() {
        this._type = poChartTypeDefault;
        this.poChartType = PoChartType;
        /**
         * @optional
         *
         * @description
         *
         * Evento executado quando o usuário clicar sobre um elemento do gráfico.
         *
         * > Será passado por parâmetro um objeto contendo a categoria e valor da série.
         */
        this.seriesClick = new EventEmitter();
        /**
         * @optional
         *
         * @description
         *
         * Evento executado quando o usuário passar o *mouse* sobre um elemento do gráfico.
         *
         * > Será passado por parâmetro um objeto contendo a categoria e valor da série.
         */
        this.seriesHover = new EventEmitter();
    }
    /**
     * @optional
     *
     * @description
     *
     * Define a altura do gráfico.
     *
     * O valor padrão dos gráficos são:
     * - para o tipo *gauge*: `200px`;
     * - para os demais tipos: `400px`.
     *
     * > O valor mínimo aceito nesta propriedade é 200.
     *
     * @default `400px`
     */
    set height(value) {
        const intValue = convertToInt(value);
        let height;
        if (isTypeof(value, 'number')) {
            height = intValue <= poChartMinHeight ? poChartMinHeight : intValue;
        }
        else {
            height = this.setDefaultHeight();
        }
        this._height = height;
        this.rebuildComponent();
    }
    get height() {
        return this._height || this.setDefaultHeight();
    }
    /**
     * @description
     *
     * Define os elementos do gráfico que serão criados dinamicamente.
     *
     * > A coleção de objetos deve implementar alguma das interfaces abaixo:
     * - `PoDonutChartSeries`
     * - `PoPieChartSeries`
     * - `PoChartGaugeSerie`
     */
    set series(value) {
        this._series = value || [];
        this.chartSeries = Array.isArray(this._series)
            ? [...this._series]
            : this.transformObjectToArrayObject(this._series);
    }
    get series() {
        return this._series;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define o tipo de gráfico.
     *
     * > Veja os valores válidos no *enum* `PoChartType`.
     *
     * @default `PoChartType.Pie`
     */
    set type(value) {
        this._type = Object.values(PoChartType).includes(value) ? value : poChartTypeDefault;
        this.rebuildComponent();
    }
    get type() {
        return this._type;
    }
    onSeriesClick(event) {
        this.seriesClick.emit(event);
    }
    onSeriesHover(event) {
        this.seriesHover.emit(event);
    }
    setDefaultHeight() {
        return this.type === PoChartType.Gauge ? poChartMinHeight : poChartDefaultHeight;
    }
    transformObjectToArrayObject(serie) {
        return typeof serie === 'object' && Object.keys(serie).length ? [Object.assign({}, serie)] : [];
    }
};
__decorate([
    Input('p-height'),
    __metadata("design:type", Number),
    __metadata("design:paramtypes", [Number])
], PoChartBaseComponent.prototype, "height", null);
__decorate([
    Input('p-series'),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], PoChartBaseComponent.prototype, "series", null);
__decorate([
    Input('p-title'),
    __metadata("design:type", String)
], PoChartBaseComponent.prototype, "title", void 0);
__decorate([
    Input('p-type'),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [String])
], PoChartBaseComponent.prototype, "type", null);
__decorate([
    Output('p-series-click'),
    __metadata("design:type", Object)
], PoChartBaseComponent.prototype, "seriesClick", void 0);
__decorate([
    Output('p-series-hover'),
    __metadata("design:type", Object)
], PoChartBaseComponent.prototype, "seriesHover", void 0);
PoChartBaseComponent = __decorate([
    Directive()
], PoChartBaseComponent);
export { PoChartBaseComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG8tdWkvbmctY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3BvLWNoYXJ0L3BvLWNoYXJ0LWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXZFLE9BQU8sRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFHMUQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBSXpELE1BQU0sb0JBQW9CLEdBQUcsR0FBRyxDQUFDO0FBQ2pDLE1BQU0sZ0JBQWdCLEdBQUcsR0FBRyxDQUFDO0FBQzdCLE1BQU0sa0JBQWtCLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQztBQUkzQzs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxJQUFzQixvQkFBb0IsR0FBMUMsTUFBc0Isb0JBQW9CO0lBQTFDO1FBR1UsVUFBSyxHQUFnQixrQkFBa0IsQ0FBQztRQUtoQyxnQkFBVyxHQUFHLFdBQVcsQ0FBQztRQWtGMUM7Ozs7Ozs7O1dBUUc7UUFFSCxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUE2RCxDQUFDO1FBRTVGOzs7Ozs7OztXQVFHO1FBRUgsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBNkQsQ0FBQztJQW1COUYsQ0FBQztJQXpIQzs7Ozs7Ozs7Ozs7Ozs7T0FjRztJQUNnQixJQUFJLE1BQU0sQ0FBQyxLQUFhO1FBQ3pDLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyQyxJQUFJLE1BQWMsQ0FBQztRQUVuQixJQUFJLFFBQVEsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEVBQUU7WUFDN0IsTUFBTSxHQUFHLFFBQVEsSUFBSSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztTQUNyRTthQUFNO1lBQ0wsTUFBTSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1NBQ2xDO1FBRUQsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7UUFFdEIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksTUFBTTtRQUNSLE9BQU8sSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUNqRCxDQUFDO0lBRUQ7Ozs7Ozs7OztPQVNHO0lBQ2dCLElBQUksTUFBTSxDQUFDLEtBQXVFO1FBQ25HLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQztRQUUzQixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUM1QyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDbkIsQ0FBQyxDQUFDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVELElBQUksTUFBTTtRQUNSLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN0QixDQUFDO0lBS0Q7Ozs7Ozs7Ozs7T0FVRztJQUNjLElBQUksSUFBSSxDQUFDLEtBQWtCO1FBQzFDLElBQUksQ0FBQyxLQUFLLEdBQVMsTUFBTyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUM7UUFFNUYsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksSUFBSTtRQUNOLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBMEJELGFBQWEsQ0FBQyxLQUFVO1FBQ3RCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCxhQUFhLENBQUMsS0FBVTtRQUN0QixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRU8sZ0JBQWdCO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLElBQUksS0FBSyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsb0JBQW9CLENBQUM7SUFDbkYsQ0FBQztJQUVPLDRCQUE0QixDQUFDLEtBQXdCO1FBQzNELE9BQU8sT0FBTyxLQUFLLEtBQUssUUFBUSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxtQkFBTSxLQUFLLEVBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ3RGLENBQUM7Q0FHRixDQUFBO0FBMUdvQjtJQUFsQixLQUFLLENBQUMsVUFBVSxDQUFDOzs7a0RBYWpCO0FBZ0JrQjtJQUFsQixLQUFLLENBQUMsVUFBVSxDQUFDOzs7a0RBTWpCO0FBT2lCO0lBQWpCLEtBQUssQ0FBQyxTQUFTLENBQUM7O21EQUFnQjtBQWFoQjtJQUFoQixLQUFLLENBQUMsUUFBUSxDQUFDOzs7Z0RBSWY7QUFnQkQ7SUFEQyxNQUFNLENBQUMsZ0JBQWdCLENBQUM7O3lEQUNtRTtBQVk1RjtJQURDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQzs7eURBQ21FO0FBaEh4RSxvQkFBb0I7SUFEekMsU0FBUyxFQUFFO0dBQ1Usb0JBQW9CLENBbUl6QztTQW5JcUIsb0JBQW9CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0LCBEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgY29udmVydFRvSW50LCBpc1R5cGVvZiB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xuXG5pbXBvcnQgeyBQb0NoYXJ0R2F1Z2VTZXJpZSB9IGZyb20gJy4vcG8tY2hhcnQtdHlwZXMvcG8tY2hhcnQtZ2F1Z2UvcG8tY2hhcnQtZ2F1Z2Utc2VyaWVzLmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb0NoYXJ0VHlwZSB9IGZyb20gJy4vZW51bXMvcG8tY2hhcnQtdHlwZS5lbnVtJztcbmltcG9ydCB7IFBvRG9udXRDaGFydFNlcmllcyB9IGZyb20gJy4vcG8tY2hhcnQtdHlwZXMvcG8tY2hhcnQtZG9udXQvcG8tY2hhcnQtZG9udXQtc2VyaWVzLmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb1BpZUNoYXJ0U2VyaWVzIH0gZnJvbSAnLi9wby1jaGFydC10eXBlcy9wby1jaGFydC1waWUvcG8tY2hhcnQtcGllLXNlcmllcy5pbnRlcmZhY2UnO1xuXG5jb25zdCBwb0NoYXJ0RGVmYXVsdEhlaWdodCA9IDQwMDtcbmNvbnN0IHBvQ2hhcnRNaW5IZWlnaHQgPSAyMDA7XG5jb25zdCBwb0NoYXJ0VHlwZURlZmF1bHQgPSBQb0NoYXJ0VHlwZS5QaWU7XG5cbmV4cG9ydCB0eXBlIFBvQ2hhcnRTZXJpZXMgPSBBcnJheTxQb0RvbnV0Q2hhcnRTZXJpZXMgfCBQb1BpZUNoYXJ0U2VyaWVzIHwgUG9DaGFydEdhdWdlU2VyaWU+O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE8gYHBvLWNoYXJ0YCDDqSB1bSBjb21wb25lbnRlIHBhcmEgcmVuZGVyaXphw6fDo28gZGUgZGFkb3MgYXRyYXbDqXMgZGUgZ3LDoWZpY29zLCBjb20gaXNzbyBmYWNpbGl0YW5kbyBhIGNvbXByZWVuc8OjbyBlIHRvcm5hbmRvIGFcbiAqIHZpc3VhbGl6YcOnw6NvIGRlc3RlcyBkYWRvcyBtYWlzIGFncmFkw6F2ZWwuXG4gKlxuICogQXRyYXbDqXMgZGUgc3VhcyBwcmluY2lwYWlzIHByb3ByaWVkYWRlcyDDqSBwb3Nzw612ZWwgZGVmaW5pciBvIHRpcG8gZGUgZ3LDoWZpY28sIHVtYSBhbHR1cmEgZSB1bSB0w610dWxvLlxuICpcbiAqIEFsw6ltIGRpc3NvLCB0YW1iw6ltIMOpIHBvc3PDrXZlbCBkZWZpbmlyIHVtYSBhw6fDo28gcXVlIHNlcsOhIGV4ZWN1dGFkYSBhbyBjbGljYXIgZW0gZGV0ZXJtaW5hZG8gZWxlbWVudG8gZG8gZ3LDoWZpY29cbiAqIGUgb3V0cmEgcXVlIHNlcsOhIGV4ZWN1dGFkYSBhbyBwYXNzYXIgbyAqbW91c2UqIHNvYnJlIG8gZWxlbWVudG8uXG4gKlxuICogIyMjIyBCb2FzIHByw6F0aWNhc1xuICpcbiAqIC0gUGFyYSBxdWUgbyBncsOhZmljbyBuw6NvIGZpcXVlIGlsZWfDrXZlbCBlIGluY29tcHJlZW5zw612ZWwsIGV2aXRlIHVtYSBxdWFudGlhIGV4Y2Vzc2l2YSBkZSBzw6lyaWVzLlxuICogLSBQYXJhIGV4aWJpciBhIGludGVuc2lkYWRlIGRlIHVtIMO6bmljbyBkYWRvIGTDqiBwcmVmZXLDqm5jaWEgYW8gdGlwbyBgZ2F1Z2VgLlxuICovXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQb0NoYXJ0QmFzZUNvbXBvbmVudCB7XG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyO1xuICBwcml2YXRlIF9zZXJpZXM6IEFycmF5PFBvRG9udXRDaGFydFNlcmllcyB8IFBvUGllQ2hhcnRTZXJpZXM+IHwgUG9DaGFydEdhdWdlU2VyaWU7XG4gIHByaXZhdGUgX3R5cGU6IFBvQ2hhcnRUeXBlID0gcG9DaGFydFR5cGVEZWZhdWx0O1xuXG4gIC8vIG1hbmlwdWxhw6fDo28gZGFzIHPDqXJpZXMgdHJhdGFkYXMgaW50ZXJuYW1lbnRlIHBhcmEgcHJlc2VydmFyICdwLXNlcmllcyc7XG4gIHByb3RlY3RlZCBjaGFydFNlcmllczogUG9DaGFydFNlcmllcztcblxuICBwdWJsaWMgcmVhZG9ubHkgcG9DaGFydFR5cGUgPSBQb0NoYXJ0VHlwZTtcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgYSBhbHR1cmEgZG8gZ3LDoWZpY28uXG4gICAqXG4gICAqIE8gdmFsb3IgcGFkcsOjbyBkb3MgZ3LDoWZpY29zIHPDo286XG4gICAqIC0gcGFyYSBvIHRpcG8gKmdhdWdlKjogYDIwMHB4YDtcbiAgICogLSBwYXJhIG9zIGRlbWFpcyB0aXBvczogYDQwMHB4YC5cbiAgICpcbiAgICogPiBPIHZhbG9yIG3DrW5pbW8gYWNlaXRvIG5lc3RhIHByb3ByaWVkYWRlIMOpIDIwMC5cbiAgICpcbiAgICogQGRlZmF1bHQgYDQwMHB4YFxuICAgKi9cbiAgQElucHV0KCdwLWhlaWdodCcpIHNldCBoZWlnaHQodmFsdWU6IG51bWJlcikge1xuICAgIGNvbnN0IGludFZhbHVlID0gY29udmVydFRvSW50KHZhbHVlKTtcbiAgICBsZXQgaGVpZ2h0OiBudW1iZXI7XG5cbiAgICBpZiAoaXNUeXBlb2YodmFsdWUsICdudW1iZXInKSkge1xuICAgICAgaGVpZ2h0ID0gaW50VmFsdWUgPD0gcG9DaGFydE1pbkhlaWdodCA/IHBvQ2hhcnRNaW5IZWlnaHQgOiBpbnRWYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGVpZ2h0ID0gdGhpcy5zZXREZWZhdWx0SGVpZ2h0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgdGhpcy5yZWJ1aWxkQ29tcG9uZW50KCk7XG4gIH1cblxuICBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodCB8fCB0aGlzLnNldERlZmF1bHRIZWlnaHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5lIG9zIGVsZW1lbnRvcyBkbyBncsOhZmljbyBxdWUgc2Vyw6NvIGNyaWFkb3MgZGluYW1pY2FtZW50ZS5cbiAgICpcbiAgICogPiBBIGNvbGXDp8OjbyBkZSBvYmpldG9zIGRldmUgaW1wbGVtZW50YXIgYWxndW1hIGRhcyBpbnRlcmZhY2VzIGFiYWl4bzpcbiAgICogLSBgUG9Eb251dENoYXJ0U2VyaWVzYFxuICAgKiAtIGBQb1BpZUNoYXJ0U2VyaWVzYFxuICAgKiAtIGBQb0NoYXJ0R2F1Z2VTZXJpZWBcbiAgICovXG4gIEBJbnB1dCgncC1zZXJpZXMnKSBzZXQgc2VyaWVzKHZhbHVlOiBQb0NoYXJ0R2F1Z2VTZXJpZSB8IEFycmF5PFBvRG9udXRDaGFydFNlcmllcyB8IFBvUGllQ2hhcnRTZXJpZXM+KSB7XG4gICAgdGhpcy5fc2VyaWVzID0gdmFsdWUgfHwgW107XG5cbiAgICB0aGlzLmNoYXJ0U2VyaWVzID0gQXJyYXkuaXNBcnJheSh0aGlzLl9zZXJpZXMpXG4gICAgICA/IFsuLi50aGlzLl9zZXJpZXNdXG4gICAgICA6IHRoaXMudHJhbnNmb3JtT2JqZWN0VG9BcnJheU9iamVjdCh0aGlzLl9zZXJpZXMpO1xuICB9XG5cbiAgZ2V0IHNlcmllcygpIHtcbiAgICByZXR1cm4gdGhpcy5fc2VyaWVzO1xuICB9XG5cbiAgLyoqIERlZmluZSBvIHTDrXR1bG8gZG8gZ3LDoWZpY28uICovXG4gIEBJbnB1dCgncC10aXRsZScpIHRpdGxlPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluZSBvIHRpcG8gZGUgZ3LDoWZpY28uXG4gICAqXG4gICAqID4gVmVqYSBvcyB2YWxvcmVzIHbDoWxpZG9zIG5vICplbnVtKiBgUG9DaGFydFR5cGVgLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgUG9DaGFydFR5cGUuUGllYFxuICAgKi9cbiAgQElucHV0KCdwLXR5cGUnKSBzZXQgdHlwZSh2YWx1ZTogUG9DaGFydFR5cGUpIHtcbiAgICB0aGlzLl90eXBlID0gKDxhbnk+T2JqZWN0KS52YWx1ZXMoUG9DaGFydFR5cGUpLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogcG9DaGFydFR5cGVEZWZhdWx0O1xuXG4gICAgdGhpcy5yZWJ1aWxkQ29tcG9uZW50KCk7XG4gIH1cblxuICBnZXQgdHlwZSgpOiBQb0NoYXJ0VHlwZSB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGU7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBFdmVudG8gZXhlY3V0YWRvIHF1YW5kbyBvIHVzdcOhcmlvIGNsaWNhciBzb2JyZSB1bSBlbGVtZW50byBkbyBncsOhZmljby5cbiAgICpcbiAgICogPiBTZXLDoSBwYXNzYWRvIHBvciBwYXLDom1ldHJvIHVtIG9iamV0byBjb250ZW5kbyBhIGNhdGVnb3JpYSBlIHZhbG9yIGRhIHPDqXJpZS5cbiAgICovXG4gIEBPdXRwdXQoJ3Atc2VyaWVzLWNsaWNrJylcbiAgc2VyaWVzQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPFBvRG9udXRDaGFydFNlcmllcyB8IFBvUGllQ2hhcnRTZXJpZXMgfCBQb0NoYXJ0R2F1Z2VTZXJpZT4oKTtcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBFdmVudG8gZXhlY3V0YWRvIHF1YW5kbyBvIHVzdcOhcmlvIHBhc3NhciBvICptb3VzZSogc29icmUgdW0gZWxlbWVudG8gZG8gZ3LDoWZpY28uXG4gICAqXG4gICAqID4gU2Vyw6EgcGFzc2FkbyBwb3IgcGFyw6JtZXRybyB1bSBvYmpldG8gY29udGVuZG8gYSBjYXRlZ29yaWEgZSB2YWxvciBkYSBzw6lyaWUuXG4gICAqL1xuICBAT3V0cHV0KCdwLXNlcmllcy1ob3ZlcicpXG4gIHNlcmllc0hvdmVyID0gbmV3IEV2ZW50RW1pdHRlcjxQb0RvbnV0Q2hhcnRTZXJpZXMgfCBQb1BpZUNoYXJ0U2VyaWVzIHwgUG9DaGFydEdhdWdlU2VyaWU+KCk7XG5cbiAgb25TZXJpZXNDbGljayhldmVudDogYW55KTogdm9pZCB7XG4gICAgdGhpcy5zZXJpZXNDbGljay5lbWl0KGV2ZW50KTtcbiAgfVxuXG4gIG9uU2VyaWVzSG92ZXIoZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgIHRoaXMuc2VyaWVzSG92ZXIuZW1pdChldmVudCk7XG4gIH1cblxuICBwcml2YXRlIHNldERlZmF1bHRIZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gUG9DaGFydFR5cGUuR2F1Z2UgPyBwb0NoYXJ0TWluSGVpZ2h0IDogcG9DaGFydERlZmF1bHRIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZm9ybU9iamVjdFRvQXJyYXlPYmplY3Qoc2VyaWU6IFBvQ2hhcnRHYXVnZVNlcmllKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzZXJpZSA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXMoc2VyaWUpLmxlbmd0aCA/IFt7IC4uLnNlcmllIH1dIDogW107XG4gIH1cblxuICBhYnN0cmFjdCByZWJ1aWxkQ29tcG9uZW50KCk6IHZvaWQ7XG59XG4iXX0=