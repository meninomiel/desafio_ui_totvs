import { __decorate, __metadata } from "tslib";
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { convertToInt } from '../../../../utils/util';
import { PoUploadDragDropAreaComponent } from './po-upload-drag-drop-area/po-upload-drag-drop-area.component';
var PoUploadDragDropHeightDefault = 320;
var PoUploadDragDropHeightMin = 160;
var PoUploadDragDropComponent = /** @class */ (function () {
    function PoUploadDragDropComponent(changeDetector) {
        this.changeDetector = changeDetector;
        this._dragDropHeight = PoUploadDragDropHeightDefault;
        this.isDragOver = false;
        this.fileChange = new EventEmitter();
        this.selectFiles = new EventEmitter();
    }
    Object.defineProperty(PoUploadDragDropComponent.prototype, "dragDropHeight", {
        get: function () {
            return this._dragDropHeight;
        },
        set: function (value) {
            var dragDropHeight = convertToInt(value, PoUploadDragDropHeightDefault);
            this._dragDropHeight = dragDropHeight < PoUploadDragDropHeightMin ? PoUploadDragDropHeightMin : dragDropHeight;
        },
        enumerable: true,
        configurable: true
    });
    PoUploadDragDropComponent.prototype.focus = function () {
        this.dragDropAreaComponent.focus();
    };
    PoUploadDragDropComponent.prototype.onAreaElement = function (element) {
        this.areaElement = element;
        // necessário para não ocorrer o erro HasBeenChecked
        this.changeDetector.detectChanges();
    };
    PoUploadDragDropComponent.prototype.onDragLeave = function () {
        this.isDragOver = false;
    };
    PoUploadDragDropComponent.prototype.onDragOver = function () {
        this.isDragOver = true;
    };
    PoUploadDragDropComponent.prototype.onFileChange = function (files) {
        this.isDragOver = false;
        this.fileChange.emit(files);
    };
    PoUploadDragDropComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef }
    ]; };
    __decorate([
        ViewChild('dragDropOverlay', { read: ElementRef }),
        __metadata("design:type", ElementRef)
    ], PoUploadDragDropComponent.prototype, "dragDropOverlayElement", void 0);
    __decorate([
        ViewChild(PoUploadDragDropAreaComponent, { static: true }),
        __metadata("design:type", PoUploadDragDropAreaComponent)
    ], PoUploadDragDropComponent.prototype, "dragDropAreaComponent", void 0);
    __decorate([
        Input('p-directory-compatible'),
        __metadata("design:type", Boolean)
    ], PoUploadDragDropComponent.prototype, "directoryCompatible", void 0);
    __decorate([
        Input('p-disabled'),
        __metadata("design:type", Boolean)
    ], PoUploadDragDropComponent.prototype, "disabled", void 0);
    __decorate([
        Input('p-drag-drop-height'),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], PoUploadDragDropComponent.prototype, "dragDropHeight", null);
    __decorate([
        Input('p-literals'),
        __metadata("design:type", Object)
    ], PoUploadDragDropComponent.prototype, "literals", void 0);
    __decorate([
        Output('p-file-change'),
        __metadata("design:type", EventEmitter)
    ], PoUploadDragDropComponent.prototype, "fileChange", void 0);
    __decorate([
        Output('p-select-files'),
        __metadata("design:type", EventEmitter)
    ], PoUploadDragDropComponent.prototype, "selectFiles", void 0);
    PoUploadDragDropComponent = __decorate([
        Component({
            selector: 'po-upload-drag-drop',
            template: "<po-upload-drag-drop-area-overlay\n  #dragDropOverlay\n  *ngIf=\"isDragOver\"\n  [p-directory-compatible]=\"directoryCompatible\"\n  [p-disabled]=\"disabled\"\n  [p-literals]=\"literals\"\n  [p-target]=\"dragDropAreaComponent.elementRef\"\n  (p-area-element)=\"onAreaElement($event)\"\n>\n</po-upload-drag-drop-area-overlay>\n\n<po-upload-drag-drop-area\n  p-upload-drag-drop\n  [p-area-element]=\"areaElement\"\n  [p-directory-compatible]=\"directoryCompatible\"\n  [p-disabled]=\"disabled\"\n  [p-height]=\"dragDropHeight\"\n  [p-literals]=\"literals\"\n  [p-overlay]=\"false\"\n  (p-drag-leave)=\"onDragLeave()\"\n  (p-drag-over)=\"onDragOver()\"\n  (p-file-change)=\"onFileChange($event)\"\n  (p-select-files)=\"selectFiles.emit()\"\n>\n</po-upload-drag-drop-area>\n",
            changeDetection: ChangeDetectionStrategy.OnPush
        }),
        __metadata("design:paramtypes", [ChangeDetectorRef])
    ], PoUploadDragDropComponent);
    return PoUploadDragDropComponent;
}());
export { PoUploadDragDropComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tdXBsb2FkLWRyYWctZHJvcC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG8tdWkvbmctY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3BvLWZpZWxkL3BvLXVwbG9hZC9wby11cGxvYWQtZHJhZy1kcm9wL3BvLXVwbG9hZC1kcmFnLWRyb3AuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBQ0wsTUFBTSxFQUNOLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFFdEQsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sK0RBQStELENBQUM7QUFHOUcsSUFBTSw2QkFBNkIsR0FBRyxHQUFHLENBQUM7QUFDMUMsSUFBTSx5QkFBeUIsR0FBRyxHQUFHLENBQUM7QUFPdEM7SUE2QkUsbUNBQW9CLGNBQWlDO1FBQWpDLG1CQUFjLEdBQWQsY0FBYyxDQUFtQjtRQTVCN0Msb0JBQWUsR0FBWSw2QkFBNkIsQ0FBQztRQUdqRSxlQUFVLEdBQVksS0FBSyxDQUFDO1FBcUJILGVBQVUsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUV2RCxnQkFBVyxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO0lBRTNCLENBQUM7SUFoQjVCLHNCQUFJLHFEQUFjO2FBTS9DO1lBQ0UsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDO1FBQzlCLENBQUM7YUFSNEIsVUFBbUIsS0FBYTtZQUMzRCxJQUFNLGNBQWMsR0FBRyxZQUFZLENBQUMsS0FBSyxFQUFFLDZCQUE2QixDQUFDLENBQUM7WUFFMUUsSUFBSSxDQUFDLGVBQWUsR0FBRyxjQUFjLEdBQUcseUJBQXlCLENBQUMsQ0FBQyxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUM7UUFDakgsQ0FBQzs7O09BQUE7SUFjRCx5Q0FBSyxHQUFMO1FBQ0UsSUFBSSxDQUFDLHFCQUFxQixDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3JDLENBQUM7SUFFRCxpREFBYSxHQUFiLFVBQWMsT0FBb0I7UUFDaEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7UUFFM0Isb0RBQW9EO1FBQ3BELElBQUksQ0FBQyxjQUFjLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdEMsQ0FBQztJQUVELCtDQUFXLEdBQVg7UUFDRSxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztJQUMxQixDQUFDO0lBRUQsOENBQVUsR0FBVjtRQUNFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxnREFBWSxHQUFaLFVBQWEsS0FBSztRQUNoQixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUV4QixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM5QixDQUFDOztnQkF6Qm1DLGlCQUFpQjs7SUF2QkQ7UUFBbkQsU0FBUyxDQUFDLGlCQUFpQixFQUFFLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxDQUFDO2tDQUF5QixVQUFVOzZFQUFDO0lBQzNCO1FBQTNELFNBQVMsQ0FBQyw2QkFBNkIsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQztrQ0FBd0IsNkJBQTZCOzRFQUFDO0lBRWhGO1FBQWhDLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQzs7MEVBQThCO0lBRXpDO1FBQXBCLEtBQUssQ0FBQyxZQUFZLENBQUM7OytEQUFtQjtJQUVWO1FBQTVCLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQzs7O21FQUkzQjtJQU1vQjtRQUFwQixLQUFLLENBQUMsWUFBWSxDQUFDOzsrREFBNEI7SUFFdkI7UUFBeEIsTUFBTSxDQUFDLGVBQWUsQ0FBQztrQ0FBYSxZQUFZO2lFQUFnQztJQUV2RDtRQUF6QixNQUFNLENBQUMsZ0JBQWdCLENBQUM7a0NBQWMsWUFBWTtrRUFBZ0M7SUEzQnhFLHlCQUF5QjtRQUxyQyxTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUscUJBQXFCO1lBQy9CLDh3QkFBbUQ7WUFDbkQsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07U0FDaEQsQ0FBQzt5Q0E4Qm9DLGlCQUFpQjtPQTdCMUMseUJBQXlCLENBdURyQztJQUFELGdDQUFDO0NBQUEsQUF2REQsSUF1REM7U0F2RFkseUJBQXlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE91dHB1dCxcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBjb252ZXJ0VG9JbnQgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlsJztcblxuaW1wb3J0IHsgUG9VcGxvYWREcmFnRHJvcEFyZWFDb21wb25lbnQgfSBmcm9tICcuL3BvLXVwbG9hZC1kcmFnLWRyb3AtYXJlYS9wby11cGxvYWQtZHJhZy1kcm9wLWFyZWEuY29tcG9uZW50JztcbmltcG9ydCB7IFBvVXBsb2FkTGl0ZXJhbHMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvLXVwbG9hZC1saXRlcmFscy5pbnRlcmZhY2UnO1xuXG5jb25zdCBQb1VwbG9hZERyYWdEcm9wSGVpZ2h0RGVmYXVsdCA9IDMyMDtcbmNvbnN0IFBvVXBsb2FkRHJhZ0Ryb3BIZWlnaHRNaW4gPSAxNjA7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3BvLXVwbG9hZC1kcmFnLWRyb3AnLFxuICB0ZW1wbGF0ZVVybDogJy4vcG8tdXBsb2FkLWRyYWctZHJvcC5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFBvVXBsb2FkRHJhZ0Ryb3BDb21wb25lbnQge1xuICBwcml2YXRlIF9kcmFnRHJvcEhlaWdodD86IG51bWJlciA9IFBvVXBsb2FkRHJhZ0Ryb3BIZWlnaHREZWZhdWx0O1xuXG4gIGFyZWFFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgaXNEcmFnT3ZlcjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIEBWaWV3Q2hpbGQoJ2RyYWdEcm9wT3ZlcmxheScsIHsgcmVhZDogRWxlbWVudFJlZiB9KSBkcmFnRHJvcE92ZXJsYXlFbGVtZW50OiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKFBvVXBsb2FkRHJhZ0Ryb3BBcmVhQ29tcG9uZW50LCB7IHN0YXRpYzogdHJ1ZSB9KSBkcmFnRHJvcEFyZWFDb21wb25lbnQ6IFBvVXBsb2FkRHJhZ0Ryb3BBcmVhQ29tcG9uZW50O1xuXG4gIEBJbnB1dCgncC1kaXJlY3RvcnktY29tcGF0aWJsZScpIGRpcmVjdG9yeUNvbXBhdGlibGU6IGJvb2xlYW47XG5cbiAgQElucHV0KCdwLWRpc2FibGVkJykgZGlzYWJsZWQ6IGJvb2xlYW47XG5cbiAgQElucHV0KCdwLWRyYWctZHJvcC1oZWlnaHQnKSBzZXQgZHJhZ0Ryb3BIZWlnaHQodmFsdWU6IG51bWJlcikge1xuICAgIGNvbnN0IGRyYWdEcm9wSGVpZ2h0ID0gY29udmVydFRvSW50KHZhbHVlLCBQb1VwbG9hZERyYWdEcm9wSGVpZ2h0RGVmYXVsdCk7XG5cbiAgICB0aGlzLl9kcmFnRHJvcEhlaWdodCA9IGRyYWdEcm9wSGVpZ2h0IDwgUG9VcGxvYWREcmFnRHJvcEhlaWdodE1pbiA/IFBvVXBsb2FkRHJhZ0Ryb3BIZWlnaHRNaW4gOiBkcmFnRHJvcEhlaWdodDtcbiAgfVxuXG4gIGdldCBkcmFnRHJvcEhlaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZHJhZ0Ryb3BIZWlnaHQ7XG4gIH1cblxuICBASW5wdXQoJ3AtbGl0ZXJhbHMnKSBsaXRlcmFsczogUG9VcGxvYWRMaXRlcmFscztcblxuICBAT3V0cHV0KCdwLWZpbGUtY2hhbmdlJykgZmlsZUNoYW5nZTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBAT3V0cHV0KCdwLXNlbGVjdC1maWxlcycpIHNlbGVjdEZpbGVzOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY2hhbmdlRGV0ZWN0b3I6IENoYW5nZURldGVjdG9yUmVmKSB7fVxuXG4gIGZvY3VzKCkge1xuICAgIHRoaXMuZHJhZ0Ryb3BBcmVhQ29tcG9uZW50LmZvY3VzKCk7XG4gIH1cblxuICBvbkFyZWFFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5hcmVhRWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICAvLyBuZWNlc3PDoXJpbyBwYXJhIG7Do28gb2NvcnJlciBvIGVycm8gSGFzQmVlbkNoZWNrZWRcbiAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIG9uRHJhZ0xlYXZlKCkge1xuICAgIHRoaXMuaXNEcmFnT3ZlciA9IGZhbHNlO1xuICB9XG5cbiAgb25EcmFnT3ZlcigpIHtcbiAgICB0aGlzLmlzRHJhZ092ZXIgPSB0cnVlO1xuICB9XG5cbiAgb25GaWxlQ2hhbmdlKGZpbGVzKSB7XG4gICAgdGhpcy5pc0RyYWdPdmVyID0gZmFsc2U7XG5cbiAgICB0aGlzLmZpbGVDaGFuZ2UuZW1pdChmaWxlcyk7XG4gIH1cbn1cbiJdfQ==