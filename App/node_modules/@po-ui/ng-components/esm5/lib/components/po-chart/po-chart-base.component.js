import { __assign, __decorate, __metadata, __read, __spread } from "tslib";
import { EventEmitter, Input, Output, Directive } from '@angular/core';
import { convertToInt, isTypeof } from '../../utils/util';
import { PoChartType } from './enums/po-chart-type.enum';
var poChartDefaultHeight = 400;
var poChartMinHeight = 200;
var poChartTypeDefault = PoChartType.Pie;
/**
 * @description
 *
 * O `po-chart` é um componente para renderização de dados através de gráficos, com isso facilitando a compreensão e tornando a
 * visualização destes dados mais agradável.
 *
 * Através de suas principais propriedades é possível definir o tipo de gráfico, uma altura e um título.
 *
 * Além disso, também é possível definir uma ação que será executada ao clicar em determinado elemento do gráfico
 * e outra que será executada ao passar o *mouse* sobre o elemento.
 *
 * #### Boas práticas
 *
 * - Para que o gráfico não fique ilegível e incompreensível, evite uma quantia excessiva de séries.
 * - Para exibir a intensidade de um único dado dê preferência ao tipo `gauge`.
 */
var PoChartBaseComponent = /** @class */ (function () {
    function PoChartBaseComponent() {
        this._type = poChartTypeDefault;
        this.poChartType = PoChartType;
        /**
         * @optional
         *
         * @description
         *
         * Evento executado quando o usuário clicar sobre um elemento do gráfico.
         *
         * > Será passado por parâmetro um objeto contendo a categoria e valor da série.
         */
        this.seriesClick = new EventEmitter();
        /**
         * @optional
         *
         * @description
         *
         * Evento executado quando o usuário passar o *mouse* sobre um elemento do gráfico.
         *
         * > Será passado por parâmetro um objeto contendo a categoria e valor da série.
         */
        this.seriesHover = new EventEmitter();
    }
    Object.defineProperty(PoChartBaseComponent.prototype, "height", {
        get: function () {
            return this._height || this.setDefaultHeight();
        },
        /**
         * @optional
         *
         * @description
         *
         * Define a altura do gráfico.
         *
         * O valor padrão dos gráficos são:
         * - para o tipo *gauge*: `200px`;
         * - para os demais tipos: `400px`.
         *
         * > O valor mínimo aceito nesta propriedade é 200.
         *
         * @default `400px`
         */
        set: function (value) {
            var intValue = convertToInt(value);
            var height;
            if (isTypeof(value, 'number')) {
                height = intValue <= poChartMinHeight ? poChartMinHeight : intValue;
            }
            else {
                height = this.setDefaultHeight();
            }
            this._height = height;
            this.rebuildComponent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoChartBaseComponent.prototype, "series", {
        get: function () {
            return this._series;
        },
        /**
         * @description
         *
         * Define os elementos do gráfico que serão criados dinamicamente.
         *
         * > A coleção de objetos deve implementar alguma das interfaces abaixo:
         * - `PoDonutChartSeries`
         * - `PoPieChartSeries`
         * - `PoChartGaugeSerie`
         */
        set: function (value) {
            this._series = value || [];
            this.chartSeries = Array.isArray(this._series)
                ? __spread(this._series) : this.transformObjectToArrayObject(this._series);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoChartBaseComponent.prototype, "type", {
        get: function () {
            return this._type;
        },
        /**
         * @optional
         *
         * @description
         *
         * Define o tipo de gráfico.
         *
         * > Veja os valores válidos no *enum* `PoChartType`.
         *
         * @default `PoChartType.Pie`
         */
        set: function (value) {
            this._type = Object.values(PoChartType).includes(value) ? value : poChartTypeDefault;
            this.rebuildComponent();
        },
        enumerable: true,
        configurable: true
    });
    PoChartBaseComponent.prototype.onSeriesClick = function (event) {
        this.seriesClick.emit(event);
    };
    PoChartBaseComponent.prototype.onSeriesHover = function (event) {
        this.seriesHover.emit(event);
    };
    PoChartBaseComponent.prototype.setDefaultHeight = function () {
        return this.type === PoChartType.Gauge ? poChartMinHeight : poChartDefaultHeight;
    };
    PoChartBaseComponent.prototype.transformObjectToArrayObject = function (serie) {
        return typeof serie === 'object' && Object.keys(serie).length ? [__assign({}, serie)] : [];
    };
    __decorate([
        Input('p-height'),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], PoChartBaseComponent.prototype, "height", null);
    __decorate([
        Input('p-series'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], PoChartBaseComponent.prototype, "series", null);
    __decorate([
        Input('p-title'),
        __metadata("design:type", String)
    ], PoChartBaseComponent.prototype, "title", void 0);
    __decorate([
        Input('p-type'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], PoChartBaseComponent.prototype, "type", null);
    __decorate([
        Output('p-series-click'),
        __metadata("design:type", Object)
    ], PoChartBaseComponent.prototype, "seriesClick", void 0);
    __decorate([
        Output('p-series-hover'),
        __metadata("design:type", Object)
    ], PoChartBaseComponent.prototype, "seriesHover", void 0);
    PoChartBaseComponent = __decorate([
        Directive()
    ], PoChartBaseComponent);
    return PoChartBaseComponent;
}());
export { PoChartBaseComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG8tdWkvbmctY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3BvLWNoYXJ0L3BvLWNoYXJ0LWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXZFLE9BQU8sRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFHMUQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBSXpELElBQU0sb0JBQW9CLEdBQUcsR0FBRyxDQUFDO0FBQ2pDLElBQU0sZ0JBQWdCLEdBQUcsR0FBRyxDQUFDO0FBQzdCLElBQU0sa0JBQWtCLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQztBQUkzQzs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSDtJQUFBO1FBR1UsVUFBSyxHQUFnQixrQkFBa0IsQ0FBQztRQUtoQyxnQkFBVyxHQUFHLFdBQVcsQ0FBQztRQWtGMUM7Ozs7Ozs7O1dBUUc7UUFFSCxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUE2RCxDQUFDO1FBRTVGOzs7Ozs7OztXQVFHO1FBRUgsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBNkQsQ0FBQztJQW1COUYsQ0FBQztJQTFHb0Isc0JBQUksd0NBQU07YUFlN0I7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDakQsQ0FBQztRQWhDRDs7Ozs7Ozs7Ozs7Ozs7V0FjRzthQUNnQixVQUFXLEtBQWE7WUFDekMsSUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3JDLElBQUksTUFBYyxDQUFDO1lBRW5CLElBQUksUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsRUFBRTtnQkFDN0IsTUFBTSxHQUFHLFFBQVEsSUFBSSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQzthQUNyRTtpQkFBTTtnQkFDTCxNQUFNLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7YUFDbEM7WUFFRCxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztZQUV0QixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUMxQixDQUFDOzs7T0FBQTtJQWdCa0Isc0JBQUksd0NBQU07YUFRN0I7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDdEIsQ0FBQztRQXBCRDs7Ozs7Ozs7O1dBU0c7YUFDZ0IsVUFBVyxLQUF1RTtZQUNuRyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUM7WUFFM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQzVDLENBQUMsVUFBSyxJQUFJLENBQUMsT0FBTyxFQUNsQixDQUFDLENBQUMsSUFBSSxDQUFDLDRCQUE0QixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN0RCxDQUFDOzs7T0FBQTtJQW9CZ0Isc0JBQUksc0NBQUk7YUFNekI7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDcEIsQ0FBQztRQW5CRDs7Ozs7Ozs7OztXQVVHO2FBQ2MsVUFBUyxLQUFrQjtZQUMxQyxJQUFJLENBQUMsS0FBSyxHQUFTLE1BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDO1lBRTVGLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBQzFCLENBQUM7OztPQUFBO0lBOEJELDRDQUFhLEdBQWIsVUFBYyxLQUFVO1FBQ3RCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCw0Q0FBYSxHQUFiLFVBQWMsS0FBVTtRQUN0QixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRU8sK0NBQWdCLEdBQXhCO1FBQ0UsT0FBTyxJQUFJLENBQUMsSUFBSSxLQUFLLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQztJQUNuRixDQUFDO0lBRU8sMkRBQTRCLEdBQXBDLFVBQXFDLEtBQXdCO1FBQzNELE9BQU8sT0FBTyxLQUFLLEtBQUssUUFBUSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxjQUFNLEtBQUssRUFBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDdEYsQ0FBQztJQXZHa0I7UUFBbEIsS0FBSyxDQUFDLFVBQVUsQ0FBQzs7O3NEQWFqQjtJQWdCa0I7UUFBbEIsS0FBSyxDQUFDLFVBQVUsQ0FBQzs7O3NEQU1qQjtJQU9pQjtRQUFqQixLQUFLLENBQUMsU0FBUyxDQUFDOzt1REFBZ0I7SUFhaEI7UUFBaEIsS0FBSyxDQUFDLFFBQVEsQ0FBQzs7O29EQUlmO0lBZ0JEO1FBREMsTUFBTSxDQUFDLGdCQUFnQixDQUFDOzs2REFDbUU7SUFZNUY7UUFEQyxNQUFNLENBQUMsZ0JBQWdCLENBQUM7OzZEQUNtRTtJQWhIeEUsb0JBQW9CO1FBRHpDLFNBQVMsRUFBRTtPQUNVLG9CQUFvQixDQW1JekM7SUFBRCwyQkFBQztDQUFBLEFBbklELElBbUlDO1NBbklxQixvQkFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQsIERpcmVjdGl2ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBjb252ZXJ0VG9JbnQsIGlzVHlwZW9mIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmltcG9ydCB7IFBvQ2hhcnRHYXVnZVNlcmllIH0gZnJvbSAnLi9wby1jaGFydC10eXBlcy9wby1jaGFydC1nYXVnZS9wby1jaGFydC1nYXVnZS1zZXJpZXMuaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvQ2hhcnRUeXBlIH0gZnJvbSAnLi9lbnVtcy9wby1jaGFydC10eXBlLmVudW0nO1xuaW1wb3J0IHsgUG9Eb251dENoYXJ0U2VyaWVzIH0gZnJvbSAnLi9wby1jaGFydC10eXBlcy9wby1jaGFydC1kb251dC9wby1jaGFydC1kb251dC1zZXJpZXMuaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvUGllQ2hhcnRTZXJpZXMgfSBmcm9tICcuL3BvLWNoYXJ0LXR5cGVzL3BvLWNoYXJ0LXBpZS9wby1jaGFydC1waWUtc2VyaWVzLmludGVyZmFjZSc7XG5cbmNvbnN0IHBvQ2hhcnREZWZhdWx0SGVpZ2h0ID0gNDAwO1xuY29uc3QgcG9DaGFydE1pbkhlaWdodCA9IDIwMDtcbmNvbnN0IHBvQ2hhcnRUeXBlRGVmYXVsdCA9IFBvQ2hhcnRUeXBlLlBpZTtcblxuZXhwb3J0IHR5cGUgUG9DaGFydFNlcmllcyA9IEFycmF5PFBvRG9udXRDaGFydFNlcmllcyB8IFBvUGllQ2hhcnRTZXJpZXMgfCBQb0NoYXJ0R2F1Z2VTZXJpZT47XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogTyBgcG8tY2hhcnRgIMOpIHVtIGNvbXBvbmVudGUgcGFyYSByZW5kZXJpemHDp8OjbyBkZSBkYWRvcyBhdHJhdsOpcyBkZSBncsOhZmljb3MsIGNvbSBpc3NvIGZhY2lsaXRhbmRvIGEgY29tcHJlZW5zw6NvIGUgdG9ybmFuZG8gYVxuICogdmlzdWFsaXphw6fDo28gZGVzdGVzIGRhZG9zIG1haXMgYWdyYWTDoXZlbC5cbiAqXG4gKiBBdHJhdsOpcyBkZSBzdWFzIHByaW5jaXBhaXMgcHJvcHJpZWRhZGVzIMOpIHBvc3PDrXZlbCBkZWZpbmlyIG8gdGlwbyBkZSBncsOhZmljbywgdW1hIGFsdHVyYSBlIHVtIHTDrXR1bG8uXG4gKlxuICogQWzDqW0gZGlzc28sIHRhbWLDqW0gw6kgcG9zc8OtdmVsIGRlZmluaXIgdW1hIGHDp8OjbyBxdWUgc2Vyw6EgZXhlY3V0YWRhIGFvIGNsaWNhciBlbSBkZXRlcm1pbmFkbyBlbGVtZW50byBkbyBncsOhZmljb1xuICogZSBvdXRyYSBxdWUgc2Vyw6EgZXhlY3V0YWRhIGFvIHBhc3NhciBvICptb3VzZSogc29icmUgbyBlbGVtZW50by5cbiAqXG4gKiAjIyMjIEJvYXMgcHLDoXRpY2FzXG4gKlxuICogLSBQYXJhIHF1ZSBvIGdyw6FmaWNvIG7Do28gZmlxdWUgaWxlZ8OtdmVsIGUgaW5jb21wcmVlbnPDrXZlbCwgZXZpdGUgdW1hIHF1YW50aWEgZXhjZXNzaXZhIGRlIHPDqXJpZXMuXG4gKiAtIFBhcmEgZXhpYmlyIGEgaW50ZW5zaWRhZGUgZGUgdW0gw7puaWNvIGRhZG8gZMOqIHByZWZlcsOqbmNpYSBhbyB0aXBvIGBnYXVnZWAuXG4gKi9cbkBEaXJlY3RpdmUoKVxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBvQ2hhcnRCYXNlQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBfaGVpZ2h0OiBudW1iZXI7XG4gIHByaXZhdGUgX3NlcmllczogQXJyYXk8UG9Eb251dENoYXJ0U2VyaWVzIHwgUG9QaWVDaGFydFNlcmllcz4gfCBQb0NoYXJ0R2F1Z2VTZXJpZTtcbiAgcHJpdmF0ZSBfdHlwZTogUG9DaGFydFR5cGUgPSBwb0NoYXJ0VHlwZURlZmF1bHQ7XG5cbiAgLy8gbWFuaXB1bGHDp8OjbyBkYXMgc8OpcmllcyB0cmF0YWRhcyBpbnRlcm5hbWVudGUgcGFyYSBwcmVzZXJ2YXIgJ3Atc2VyaWVzJztcbiAgcHJvdGVjdGVkIGNoYXJ0U2VyaWVzOiBQb0NoYXJ0U2VyaWVzO1xuXG4gIHB1YmxpYyByZWFkb25seSBwb0NoYXJ0VHlwZSA9IFBvQ2hhcnRUeXBlO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluZSBhIGFsdHVyYSBkbyBncsOhZmljby5cbiAgICpcbiAgICogTyB2YWxvciBwYWRyw6NvIGRvcyBncsOhZmljb3Mgc8OjbzpcbiAgICogLSBwYXJhIG8gdGlwbyAqZ2F1Z2UqOiBgMjAwcHhgO1xuICAgKiAtIHBhcmEgb3MgZGVtYWlzIHRpcG9zOiBgNDAwcHhgLlxuICAgKlxuICAgKiA+IE8gdmFsb3IgbcOtbmltbyBhY2VpdG8gbmVzdGEgcHJvcHJpZWRhZGUgw6kgMjAwLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgNDAwcHhgXG4gICAqL1xuICBASW5wdXQoJ3AtaGVpZ2h0Jykgc2V0IGhlaWdodCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgY29uc3QgaW50VmFsdWUgPSBjb252ZXJ0VG9JbnQodmFsdWUpO1xuICAgIGxldCBoZWlnaHQ6IG51bWJlcjtcblxuICAgIGlmIChpc1R5cGVvZih2YWx1ZSwgJ251bWJlcicpKSB7XG4gICAgICBoZWlnaHQgPSBpbnRWYWx1ZSA8PSBwb0NoYXJ0TWluSGVpZ2h0ID8gcG9DaGFydE1pbkhlaWdodCA6IGludFZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWlnaHQgPSB0aGlzLnNldERlZmF1bHRIZWlnaHQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICB0aGlzLnJlYnVpbGRDb21wb25lbnQoKTtcbiAgfVxuXG4gIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0IHx8IHRoaXMuc2V0RGVmYXVsdEhlaWdodCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgb3MgZWxlbWVudG9zIGRvIGdyw6FmaWNvIHF1ZSBzZXLDo28gY3JpYWRvcyBkaW5hbWljYW1lbnRlLlxuICAgKlxuICAgKiA+IEEgY29sZcOnw6NvIGRlIG9iamV0b3MgZGV2ZSBpbXBsZW1lbnRhciBhbGd1bWEgZGFzIGludGVyZmFjZXMgYWJhaXhvOlxuICAgKiAtIGBQb0RvbnV0Q2hhcnRTZXJpZXNgXG4gICAqIC0gYFBvUGllQ2hhcnRTZXJpZXNgXG4gICAqIC0gYFBvQ2hhcnRHYXVnZVNlcmllYFxuICAgKi9cbiAgQElucHV0KCdwLXNlcmllcycpIHNldCBzZXJpZXModmFsdWU6IFBvQ2hhcnRHYXVnZVNlcmllIHwgQXJyYXk8UG9Eb251dENoYXJ0U2VyaWVzIHwgUG9QaWVDaGFydFNlcmllcz4pIHtcbiAgICB0aGlzLl9zZXJpZXMgPSB2YWx1ZSB8fCBbXTtcblxuICAgIHRoaXMuY2hhcnRTZXJpZXMgPSBBcnJheS5pc0FycmF5KHRoaXMuX3NlcmllcylcbiAgICAgID8gWy4uLnRoaXMuX3Nlcmllc11cbiAgICAgIDogdGhpcy50cmFuc2Zvcm1PYmplY3RUb0FycmF5T2JqZWN0KHRoaXMuX3Nlcmllcyk7XG4gIH1cblxuICBnZXQgc2VyaWVzKCkge1xuICAgIHJldHVybiB0aGlzLl9zZXJpZXM7XG4gIH1cblxuICAvKiogRGVmaW5lIG8gdMOtdHVsbyBkbyBncsOhZmljby4gKi9cbiAgQElucHV0KCdwLXRpdGxlJykgdGl0bGU/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5lIG8gdGlwbyBkZSBncsOhZmljby5cbiAgICpcbiAgICogPiBWZWphIG9zIHZhbG9yZXMgdsOhbGlkb3Mgbm8gKmVudW0qIGBQb0NoYXJ0VHlwZWAuXG4gICAqXG4gICAqIEBkZWZhdWx0IGBQb0NoYXJ0VHlwZS5QaWVgXG4gICAqL1xuICBASW5wdXQoJ3AtdHlwZScpIHNldCB0eXBlKHZhbHVlOiBQb0NoYXJ0VHlwZSkge1xuICAgIHRoaXMuX3R5cGUgPSAoPGFueT5PYmplY3QpLnZhbHVlcyhQb0NoYXJ0VHlwZSkuaW5jbHVkZXModmFsdWUpID8gdmFsdWUgOiBwb0NoYXJ0VHlwZURlZmF1bHQ7XG5cbiAgICB0aGlzLnJlYnVpbGRDb21wb25lbnQoKTtcbiAgfVxuXG4gIGdldCB0eXBlKCk6IFBvQ2hhcnRUeXBlIHtcbiAgICByZXR1cm4gdGhpcy5fdHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEV2ZW50byBleGVjdXRhZG8gcXVhbmRvIG8gdXN1w6FyaW8gY2xpY2FyIHNvYnJlIHVtIGVsZW1lbnRvIGRvIGdyw6FmaWNvLlxuICAgKlxuICAgKiA+IFNlcsOhIHBhc3NhZG8gcG9yIHBhcsOibWV0cm8gdW0gb2JqZXRvIGNvbnRlbmRvIGEgY2F0ZWdvcmlhIGUgdmFsb3IgZGEgc8OpcmllLlxuICAgKi9cbiAgQE91dHB1dCgncC1zZXJpZXMtY2xpY2snKVxuICBzZXJpZXNDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8UG9Eb251dENoYXJ0U2VyaWVzIHwgUG9QaWVDaGFydFNlcmllcyB8IFBvQ2hhcnRHYXVnZVNlcmllPigpO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEV2ZW50byBleGVjdXRhZG8gcXVhbmRvIG8gdXN1w6FyaW8gcGFzc2FyIG8gKm1vdXNlKiBzb2JyZSB1bSBlbGVtZW50byBkbyBncsOhZmljby5cbiAgICpcbiAgICogPiBTZXLDoSBwYXNzYWRvIHBvciBwYXLDom1ldHJvIHVtIG9iamV0byBjb250ZW5kbyBhIGNhdGVnb3JpYSBlIHZhbG9yIGRhIHPDqXJpZS5cbiAgICovXG4gIEBPdXRwdXQoJ3Atc2VyaWVzLWhvdmVyJylcbiAgc2VyaWVzSG92ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPFBvRG9udXRDaGFydFNlcmllcyB8IFBvUGllQ2hhcnRTZXJpZXMgfCBQb0NoYXJ0R2F1Z2VTZXJpZT4oKTtcblxuICBvblNlcmllc0NsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLnNlcmllc0NsaWNrLmVtaXQoZXZlbnQpO1xuICB9XG5cbiAgb25TZXJpZXNIb3ZlcihldmVudDogYW55KTogdm9pZCB7XG4gICAgdGhpcy5zZXJpZXNIb3Zlci5lbWl0KGV2ZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0RGVmYXVsdEhlaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlID09PSBQb0NoYXJ0VHlwZS5HYXVnZSA/IHBvQ2hhcnRNaW5IZWlnaHQgOiBwb0NoYXJ0RGVmYXVsdEhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgdHJhbnNmb3JtT2JqZWN0VG9BcnJheU9iamVjdChzZXJpZTogUG9DaGFydEdhdWdlU2VyaWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHNlcmllID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyhzZXJpZSkubGVuZ3RoID8gW3sgLi4uc2VyaWUgfV0gOiBbXTtcbiAgfVxuXG4gIGFic3RyYWN0IHJlYnVpbGRDb21wb25lbnQoKTogdm9pZDtcbn1cbiJdfQ==